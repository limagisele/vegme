<h1>Order</h1>
<% if @order_items.size == 0 %>
    <p>You don't have items in your order yet!</p>
<% else %>
    <table class="table table-borderless">
    <thead>
        <tr>
        <th scope="col">Item</th>
        <th scope="col">Unit Price</th>
        <th scope="col">Quantity</th>
        <th scope="col">Item Total</th>
        </tr>
    </thead>
    <tbody>
        <% @order_items.each do |item| %>
        <tr>
        <th scope="row"><%= item.menu_item.name %></th>
        <td>$<%= item.menu_item.price %></td>
        <td>
            <%= form_with(model: item, url: "/order_menu_items/#{item.id}") do |f| %>
                <%= f.hidden_field :menu_item_id, value: item.menu_item.id %>
                <%= f.number_field :quantity, value: item.quantity, in: 1..20 %>
                <%= f.submit "Update", class: 'btn btn-outline-primary btn-sm'%>
            <% end %>
        </td>
        <td>$<%= item.total_price %></td>
        <td>
            <%= form_with(model: item, url: "/order_menu_items/#{item.id}") do |f| %>
                <%= button_to('Remove Item', order_menu_items_path(item.id), class: 'btn btn-outline-danger btn-sm', method: :delete) %>
            <% end %>
        </td>
        </tr>
        <% end %>
    </tbody>
    </table>
    
    <h6>Total Order: $<%= @order.order_total_price %></h6>
    <%= link_to 'Back to Menu', menu_path(@order_items[0].menu_item.user_id) %>
<% end %>
